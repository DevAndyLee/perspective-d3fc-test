<!--
   
   Copyright (c) 2017, the Perspective Authors.
   
   This file is part of the Perspective library, distributed under the terms of
   the Apache License 2.0.  The full license can be found in the LICENSE file.

-->

<!DOCTYPE html>
<html>

<head>

    <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">

    <script src="/perspective.view.js"></script>
    <script src="/hypergrid.plugin.js"></script>
    <script src="/highcharts.plugin.js"></script>
    <script src="../d3fc.plugin.js"></script>

    <script src="/perspective.js"></script>

    <link rel='stylesheet' href="/material.css" is="custom-style">

    <!-- Dark theme -->
    <!--
    <link rel='stylesheet' href="/material.dark.css" is="custom-style">
    <link rel='stylesheet' href="/template.plugin.dark.css" is="custom-style">
    -->

    <style>
        .example {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
        }
    </style>

    <title>Perspective Test</title>
</head>

<body>

    <perspective-viewer class="example" view="d3_xy_scatter" row-pivots='["State"]' column-pivots='[]'
        sort='[["Profit", "desc"]]' columns='["Sub-Category","Profit"]' filters='[]' settings="true"
        aggregates='{"Category":"distinct count","City":"distinct count","Country":"distinct count","Customer ID":"distinct count","Customer Name":"distinct count","Order ID":"distinct count","Postal Code":"distinct count","Product ID":"distinct count","Product Name":"distinct count","Region":"distinct count","Segment":"distinct count","Ship Mode":"distinct count","State":"distinct count","Sub-Category":"dominant","Order Date":"distinct count","Ship Date":"distinct count","Quantity":"sum","Row ID":"sum","Discount":"sum","Profit":"sum","Sales":"sum"}'>

    </perspective-viewer>

    <script>
        window.addEventListener('WebComponentsReady', function () {
            var xhr = new XMLHttpRequest();
            xhr.open('GET', '../data/superstore.arrow', true);
            xhr.responseType = "arraybuffer"
            xhr.onload = function () {
                var el = document.getElementsByTagName('perspective-viewer')[0];
                el.load(xhr.response);
                el.toggleConfig();
            }
            xhr.send(null);
        });
    </script>

</body>

</html>